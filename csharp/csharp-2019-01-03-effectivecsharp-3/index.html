<!DOCTYPE html>
<html lang>
  <head><meta name="generator" content="Hexo 3.8.0">
    
<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta name="google-site-verification" content="ZPpg1XKRwaiB4lPx6SawBAA96ROVlVBmZ8s6pigFEVc">



<meta name="naver-site-verification" content="a31e494cb7e78d5a64696ea234dc6c9006b251ff">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">


<meta property="og:type" content="website">
<meta property="og:url" content="https://parkdoyeon.github.io/csharp/csharp-2019-01-03-effectivecsharp-3/">


  <meta property="og:title" content="effective c# - 3. 제네릭 활용">




  <meta name="description" content="effective c# - 3. 제네릭 활용">
  <meta property="og:description" content="effective c# - 3. 제네릭 활용">





  <meta name="keywords" content="c#,effectivec#,">





  <link rel="alternate" href="/atom.xml" title="Park Doyeon">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=">



<link rel="canonical" href="https://parkdoyeon.github.io/csharp/csharp-2019-01-03-effectivecsharp-3/">


<meta name="description" content="반드시 필요한 제약조건만 설정하라 제너릭 타입을 활용할때 타입 조건을 넣고싶다면 제약조건 예약어 where를 사용하는 것이 좋다 그러나 기본값을 할당하는데 있어서 default()와 new()는 분명한 차이가 있으므로, 제약조건에 new()를 넣을땐 이용자가 구현에 어려움을 겪을수도 있다는 것을 생각해야한다.  런타입에 타입을 확인하여 최적의 알고리즘을 사">
<meta name="keywords" content="c#,effectivec#">
<meta property="og:type" content="article">
<meta property="og:title" content="effective c# - 3. 제네릭 활용">
<meta property="og:url" content="https://parkdoyeon.github.io/csharp/csharp-2019-01-03-effectivecsharp-3/index.html">
<meta property="og:site_name" content="Park Doyeon">
<meta property="og:description" content="반드시 필요한 제약조건만 설정하라 제너릭 타입을 활용할때 타입 조건을 넣고싶다면 제약조건 예약어 where를 사용하는 것이 좋다 그러나 기본값을 할당하는데 있어서 default()와 new()는 분명한 차이가 있으므로, 제약조건에 new()를 넣을땐 이용자가 구현에 어려움을 겪을수도 있다는 것을 생각해야한다.  런타입에 타입을 확인하여 최적의 알고리즘을 사">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-06-08T02:58:52.614Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="effective c# - 3. 제네릭 활용">
<meta name="twitter:description" content="반드시 필요한 제약조건만 설정하라 제너릭 타입을 활용할때 타입 조건을 넣고싶다면 제약조건 예약어 where를 사용하는 것이 좋다 그러나 기본값을 할당하는데 있어서 default()와 new()는 분명한 차이가 있으므로, 제약조건에 new()를 넣을땐 이용자가 구현에 어려움을 겪을수도 있다는 것을 생각해야한다.  런타입에 타입을 확인하여 최적의 알고리즘을 사">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-141653278-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-141653278-1');
  </script>





  


    <title> effective c# - 3. 제네릭 활용 - Park Doyeon </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  </head>

  <body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">Park Doyeon</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>
      </header>

      <div id="post-categories"><ul class="category-list">

    <li>
    
        <a href="/dev-env">Dev-Env</a>
    
    </li>

    <li>
    
        <a href="/docker">Docker</a>
    
    </li>

    <li>
    
        <a href="/csharp" class="on">C#</a>
    
    </li>

    <li>
    
        <a href="/elk">ELK</a>
    
    </li>

    <li>
    
        <a href="/python">Python</a>
    
    </li>

    <li>
    
        <a href="/ml">ML</a>
    
    </li>

    <li>
    
        <a href="/web">Web</a>
    
    </li>

    <li>
    
        <a href="/sql">SQL</a>
    
    </li>

</ul>

      </div>

      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          effective c# - 3. 제네릭 활용
        
      </h1>

      <time class="post-time">
          Jan 3 2019
      </time>
    </header>



    
            <div class="post-content">
            <h3 id="반드시-필요한-제약조건만-설정하라"><a href="#반드시-필요한-제약조건만-설정하라" class="headerlink" title="반드시 필요한 제약조건만 설정하라"></a>반드시 필요한 제약조건만 설정하라</h3><ul>
<li>제너릭 타입을 활용할때 타입 조건을 넣고싶다면 제약조건 예약어 <a href="parkdoyeon.github.io/csharp/2018-12-05-csharp-2.0-Generic">where</a>를 사용하는 것이 좋다</li>
<li>그러나 기본값을 할당하는데 있어서 default()와 new()는 분명한 차이가 있으므로, 제약조건에 new()를 넣을땐 이용자가 구현에 어려움을 겪을수도 있다는 것을 생각해야한다.</li>
</ul>
<h3 id="런타입에-타입을-확인하여-최적의-알고리즘을-사용하라"><a href="#런타입에-타입을-확인하여-최적의-알고리즘을-사용하라" class="headerlink" title="런타입에 타입을 확인하여 최적의 알고리즘을 사용하라"></a>런타입에 타입을 확인하여 최적의 알고리즘을 사용하라</h3><ul>
<li>제약조건을 사용하지 않고 제너릭 타입을 사용하게되면 런타임에 타입확인이 이뤄진다.</li>
<li>이때, 런타임 환경을 최대한 고려하여 최적화된 타입별 생성자/메소드 오버로드등을 작성하는 것이 좋다.</li>
</ul>
<h3 id="IComparable와-IComparer를-이용하여-객체의-선후관계를-정의하라"><a href="#IComparable와-IComparer를-이용하여-객체의-선후관계를-정의하라" class="headerlink" title="IComparable와 IComparer를 이용하여 객체의 선후관계를 정의하라"></a>IComparable<t>와 IComparer<t>를 이용하여 객체의 선후관계를 정의하라</t></t></h3><ul>
<li>ICompareable<t>는 현재 객체의 비교대상을 지정해 리턴하고, IComparer<t>는 T타입의 모든 객체의 비교 함수를 정의한다. <a href="https://stackoverflow.com/questions/9316918/what-is-the-difference-between-iequalitycomparert-and-iequatablet" rel="external nofollow noopener noreferrer" target="_blank">참조</a><ul>
<li><strong>IComparable</strong> - Defines an interface for an object with a CompareTo() method that takes another object of the same type and compares <strong>the current object</strong> to the passed one. It internalizes the comparison to the object, allowing for a more inline comparison operation, and is useful when there’s only one logical way, or an overwhelmingly common default way, to compare objects of a type.</li>
<li><strong>IComparer</strong> - Defines an interface with a Compare() method that <strong>takes two objects of another type</strong> (which don’t have to implement IComparable) and compares them. This externalizes the comparison, and is useful when there are many feasible ways to compare two objects of a type, or when the type doesn’t implement IComparable (or the IComparable implementation compares a different way than what you want) and you don’t have control over that type’s source.</li>
</ul>
</t></t></li>
<li>이때 제네릭 타입이 구현안된 IComparable, ICompar er도 하위 호환(.NET 2.0 이전버전)을 위해 구현하면 좋다.</li>
</ul>
<h3 id="타입-매개변수가-IDisposable을-구현한-경우를-대비하여-제네릭-클래스를-작성하라"><a href="#타입-매개변수가-IDisposable을-구현한-경우를-대비하여-제네릭-클래스를-작성하라" class="headerlink" title="타입 매개변수가 IDisposable을 구현한 경우를 대비하여 제네릭 클래스를 작성하라"></a>타입 매개변수가 IDisposable을 구현한 경우를 대비하여 제네릭 클래스를 작성하라</h3><ul>
<li>타입 매개변수가 IDisposable을 구현했을때 using(a as IDisposable) 구문을 사용하여 dispose 호출이 가능하다<ul>
<li>만약 a가 IDisposable을 구현하지 않았다면 null이 리턴되고 dispose 호출을 하지 않기때문에, 깔끔한 코드 작성이 된다.<pre><code class="c#">{
    public void GetThingsDone()
    {
        T driver = new T();
        using(driver as IDisposable)
        {
            driver.DoWork();
        }
    }
}</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="공변성과-반공변성을-지원하라-고민해볼-것"><a href="#공변성과-반공변성을-지원하라-고민해볼-것" class="headerlink" title="공변성과 반공변성을 지원하라 (고민해볼 것)"></a>공변성과 반공변성을 지원하라 (고민해볼 것)</h3><h3 id="타입-매개변수에-대해-메서드-제약-조건을-서정하려면-델리게이트를-사용하라"><a href="#타입-매개변수에-대해-메서드-제약-조건을-서정하려면-델리게이트를-사용하라" class="headerlink" title="타입 매개변수에 대해 메서드 제약 조건을 서정하려면 델리게이트를 사용하라"></a>타입 매개변수에 대해 메서드 제약 조건을 서정하려면 델리게이트를 사용하라</h3><ul>
<li>특정 메서드를 구현하기위해서 인터페이스를 설정하기보다, 해당 메서드를 호출부에서 구현하는 것이 더 편리할때가 있다.<ul>
<li>가령</li>
<li>특정 매개변수를 받는 생성자 시퀀스 함수를 호출할 때, 타입 제약조건으로 ‘매개변수가 있는’ 생성자를 설정할 순 없다. 여기서 델리게이트를 사용하면 제약을 둘 수 있다. <pre><code class="c#">{
    List&lt;Point&gt; values = new List&lt;Point&gt;(
        Utilities.Zip(xValues, yValues, (x, y) -&gt; new Point(x, y))
    )
}</code></pre>
</li>
<li>인터페이스 구현시 다양한 타입이 전달되면 타입별로 오버라이드를 해야할 수 있다.</li>
</ul>
</li>
</ul>
<h3 id="베이스-클래스나-인터페이스에-대해서-제네릭을-특화하지-말라"><a href="#베이스-클래스나-인터페이스에-대해서-제네릭을-특화하지-말라" class="headerlink" title="베이스 클래스나 인터페이스에 대해서 제네릭을 특화하지 말라"></a>베이스 클래스나 인터페이스에 대해서 제네릭을 특화하지 말라</h3><ul>
<li>오버로드된 메서드가 여러개인 경우, 컴파일러가 이 중 하나를 어떻게 선택하는지 정확히 알고있어야 한다.</li>
<li>잘못된 오버라이드 함수가 선택되었을때 메서드 내에서 타입확인을 하여 런타임에러를 방지할 수 있겠지만,<ul>
<li>제네릭은 본래 런타임에 타입확인을 수행하지 않기 위해 만들어졌다.</li>
<li>박싱/언박싱을 통한 런타임 오버헤드도 문제가 될 수 있다.</li>
</ul>
</li>
</ul>
<h3 id="타입-매개변수로-인스턴스-필드를-만들-필요가-없다면-제네릭-메서드를-정의하라"><a href="#타입-매개변수로-인스턴스-필드를-만들-필요가-없다면-제네릭-메서드를-정의하라" class="headerlink" title="타입 매개변수로 인스턴스 필드를 만들 필요가 없다면 제네릭 메서드를 정의하라"></a>타입 매개변수로 인스턴스 필드를 만들 필요가 없다면 제네릭 메서드를 정의하라</h3><ul>
<li>제너릭’클래스’의 경우 호출시마다 타입을 명시적으로 지정해야한다.<ul>
<li>이렇게하면 우선 귀찮은 문제가 있고</li>
<li>해당 클래스마다 제네릭 클래스가 구현되었는지 확인해봐야한다.</li>
</ul>
</li>
<li>반면 일반 클래스내에서 오버로딩을 통해 제네릭 함수를 구현하면<ul>
<li>캐스팅을 통한 문제(박싱/언박싱 오버헤드, 런타임 에러)가 발생하지 않는다</li>
</ul>
</li>
</ul>
<h3 id="제네릭-인터페이스와-논제네릭-인터페이스를-함께-구현하라"><a href="#제네릭-인터페이스와-논제네릭-인터페이스를-함께-구현하라" class="headerlink" title="제네릭 인터페이스와 논제네릭 인터페이스를 함께 구현하라"></a>제네릭 인터페이스와 논제네릭 인터페이스를 함께 구현하라</h3><ul>
<li>버전문제!</li>
</ul>
<h3 id="인터페이스는-간략히-정의하고-기능의-확장은-확장메서드를-사용하라"><a href="#인터페이스는-간략히-정의하고-기능의-확장은-확장메서드를-사용하라" class="headerlink" title="인터페이스는 간략히 정의하고 기능의 확장은 확장메서드를 사용하라"></a>인터페이스는 간략히 정의하고 기능의 확장은 확장메서드를 사용하라</h3><ul>
<li>인터페이스를 통해 기능추가를 하면 기존에 인터페이스를 구현하고 있는 클래스를 수정해야한다.</li>
<li>반면에 확장메서드를 사용하면<ul>
<li>모든 구현부의 모든 클래스에서 호출이 가능하고</li>
<li>이용자에게 메소드의 구현방식에대한 가이드가 된다</li>
</ul>
</li>
<li>물론 동일한 이름의 확장메서드 명이 이미 구현이 되어있는경우 확장메서드가 호출되는 문제가 있을 수 있지만, 이경우 이름을 바꾸거나 완벽하게 동일한 기능을 하도록 작성하여 피할 수 있다.</li>
</ul>
<h3 id="확장-메서드를-이용하여-구체화된-제네릭-타입을-개선하라"><a href="#확장-메서드를-이용하여-구체화된-제네릭-타입을-개선하라" class="headerlink" title="확장 메서드를 이용하여 구체화된 제네릭 타입을 개선하라"></a>확장 메서드를 이용하여 구체화된 제네릭 타입을 개선하라</h3><ul>
<li>확장메서드를 사용하지 않으면 구체화된 제네릭타입을 상속해서 새로운 타입을 만들어야 하는데,<ul>
<li>이렇게 하면 상속타입에 대한 제약이 발생한다.</li>
<li>가령 이터레이터 확장메서드를 통해 메서드 구현을 하면될것을 List타입을 상속받아 클래스 내에서 구현하면 다른 이터레이터 형태의 메서드 구현이 어려워진다.</li>
</ul>
</li>
</ul>

            </div>
          

    
      <footer class="post-footer">
        <div class="post-tags">
          
            <a href="/tags/c/">c#</a>
          
            <a href="/tags/effectivec/">effectivec#</a>
          
        </div>

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/csharp/csharp-2019-01-24-effectivecsharp-4/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">effective c# - 4. LINQ 활용</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/csharp/csharp-2018-12-31-effectivecsharp-2/">
        <span class="next-text nav-default">effective c# - 2. 리소스 관리</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
    <!--<div style="text-align:center;">
        <button class="btn" id="load-disqus" onclick="disqus.load();">load Disqus review</button>
    </div>-->
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
    2019
    <span class="footer-author">Park Doyeon.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> and <a class="theme-link" href="https://github.com/parkdoyeon">Me</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    

<script type="text/javascript">
  var disqus_shortname = 'parkdoyeon';
  var disqus_identifier = 'csharp/csharp-2019-01-03-effectivecsharp-3/';
  var disqus_url = 'https://parkdoyeon.github.io/csharp/csharp-2019-01-03-effectivecsharp-3/index.html';

  
  var disqus_config = function () {
      this.page.url = disqus_url;
      this.page.identifier = disqus_identifier;
  };
  
  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  
  
  // var disqus = {
  //   load : function disqus(){
  //       if(typeof DISQUS !== 'object') {
  //         (function () {
  //         var s = document.createElement('script'); s.async = true;
  //         s.type = 'text/javascript';
  //         s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  //         (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  //         }());
  //         $('#load-disqus').remove(); ///Delete Button
  //       }
  //   }
  // }

</script>


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script src="/js/src/theme.js?v="></script>
<script src="/js/src/bootstrap.js?v="></script>


    <script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>


<script src="/js/src/highlight.pack.js?v="></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.7.0/highlightjs-line-numbers.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', (event) => {
  document.querySelectorAll('figure.highlight').forEach((block) => {
    hljs.highlightBlock(block);
  });
});
hljs.initHighlightingOnLoad();
hljs.initLineNumbersOnLoad();
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  </body>
</html>
